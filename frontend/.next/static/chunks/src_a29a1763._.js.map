{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///I:/Project%20Coding/granime.v2/src/components/ui/loader.tsx"],"sourcesContent":["\"use client\";\r\nimport Image from \"next/image\";\r\n\r\nexport const Loader = () => {\r\n  return (\r\n    <div className=\"flex flex-col gap-2 justify-center items-center\">\r\n      <Image src=\"/loader.gif\" alt=\"loading\" width={100} height={100} />\r\n      <p className=\"text-primary text-center text-xs\">Chotto matte...</p>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGO,MAAM,SAAS;IACpB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,2IAAK;gBAAC,KAAI;gBAAc,KAAI;gBAAU,OAAO;gBAAK,QAAQ;;;;;;0BAC3D,6LAAC;gBAAE,WAAU;0BAAmC;;;;;;;;;;;;AAGtD;KAPa","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///I:/Project%20Coding/granime.v2/src/app/%28auth%29/auth/callback/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Loader } from \"@/components/ui/loader\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function AuthCallback() {\r\n  const router = useRouter();\r\n  useEffect(() => {\r\n    const getSession = async () => {\r\n      try {\r\n        const {\r\n          data: { session },\r\n          error,\r\n        } = await supabase.auth.getSession();\r\n\r\n        if (error) {\r\n          console.error(\"Session error:\", error.message);\r\n          router.push(\"/auth/login\");\r\n          return;\r\n        }\r\n\r\n        if (session) {\r\n          console.log(\"Session established for:\", session.user.email);\r\n\r\n          // Initialize user data for new OAuth users\r\n          try {\r\n            const initResponse = await fetch(\"/api/user/initialize\", {\r\n              method: \"POST\",\r\n            });\r\n\r\n            const initData = await initResponse.json();\r\n\r\n            if (initResponse.ok) {\r\n              console.log(\"User initialization:\", initData.message);\r\n            } else {\r\n              console.warn(\"Initialization warning:\", initData.message);\r\n            }\r\n          } catch (initError) {\r\n            console.error(\"Failed to initialize user:\", initError);\r\n            // Don't block login if initialization fails\r\n          }\r\n\r\n          router.push(\"/\");\r\n        } else {\r\n          console.warn(\"No session found, redirecting to login\");\r\n          router.push(\"/auth/login\");\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Callback error:\", err);\r\n        router.push(\"/auth/login\");\r\n      }\r\n    };\r\n    getSession();\r\n  }, [router, supabase]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-12 justify-center items-center w-screen h-screen\">\r\n      <Loader />\r\n      <p className=\"text-primary font-bold text-center text-sm\">\r\n        Authenticating...\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,IAAA,0KAAS;kCAAC;YACR,MAAM;qDAAa;oBACjB,IAAI;wBACF,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EACjB,KAAK,EACN,GAAG,MAAM,2IAAQ,CAAC,IAAI,CAAC,UAAU;wBAElC,IAAI,OAAO;4BACT,QAAQ,KAAK,CAAC,kBAAkB,MAAM,OAAO;4BAC7C,OAAO,IAAI,CAAC;4BACZ;wBACF;wBAEA,IAAI,SAAS;4BACX,QAAQ,GAAG,CAAC,4BAA4B,QAAQ,IAAI,CAAC,KAAK;4BAE1D,2CAA2C;4BAC3C,IAAI;gCACF,MAAM,eAAe,MAAM,MAAM,wBAAwB;oCACvD,QAAQ;gCACV;gCAEA,MAAM,WAAW,MAAM,aAAa,IAAI;gCAExC,IAAI,aAAa,EAAE,EAAE;oCACnB,QAAQ,GAAG,CAAC,wBAAwB,SAAS,OAAO;gCACtD,OAAO;oCACL,QAAQ,IAAI,CAAC,2BAA2B,SAAS,OAAO;gCAC1D;4BACF,EAAE,OAAO,WAAW;gCAClB,QAAQ,KAAK,CAAC,8BAA8B;4BAC5C,4CAA4C;4BAC9C;4BAEA,OAAO,IAAI,CAAC;wBACd,OAAO;4BACL,QAAQ,IAAI,CAAC;4BACb,OAAO,IAAI,CAAC;wBACd;oBACF,EAAE,OAAO,KAAK;wBACZ,QAAQ,KAAK,CAAC,mBAAmB;wBACjC,OAAO,IAAI,CAAC;oBACd;gBACF;;YACA;QACF;iCAAG;QAAC;QAAQ,2IAAQ;KAAC;IAErB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,+IAAM;;;;;0BACP,6LAAC;gBAAE,WAAU;0BAA6C;;;;;;;;;;;;AAKhE;GA1DwB;;QACP,kJAAS;;;KADF","debugId":null}}]
}