{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///I:/Project%20Coding/granime.v2/src/components/ui/loader.tsx"],"sourcesContent":["\"use client\";\r\nimport Image from \"next/image\";\r\n\r\nexport const Loader = () => {\r\n  return (\r\n    <div className=\"flex flex-col gap-2 justify-center items-center\">\r\n      <Image src=\"/loader.gif\" alt=\"loading\" width={100} height={100} />\r\n      <p className=\"text-primary text-center text-xs\">Chotto matte...</p>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGO,MAAM,SAAS;IACpB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,wIAAK;gBAAC,KAAI;gBAAc,KAAI;gBAAU,OAAO;gBAAK,QAAQ;;;;;;0BAC3D,8OAAC;gBAAE,WAAU;0BAAmC;;;;;;;;;;;;AAGtD","debugId":null}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///I:/Project%20Coding/granime.v2/src/app/%28auth%29/auth/callback/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Loader } from \"@/components/ui/loader\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function AuthCallback() {\r\n  const router = useRouter();\r\n  useEffect(() => {\r\n    const getSession = async () => {\r\n      try {\r\n        const {\r\n          data: { session },\r\n          error,\r\n        } = await supabase.auth.getSession();\r\n\r\n        if (error) {\r\n          console.error(\"Session error:\", error.message);\r\n          router.push(\"/auth/login\");\r\n          return;\r\n        }\r\n\r\n        if (session) {\r\n          console.log(\"Session established for:\", session.user.email);\r\n\r\n          // Initialize user data for new OAuth users\r\n          try {\r\n            const initResponse = await fetch(\"/api/user/initialize\", {\r\n              method: \"POST\",\r\n            });\r\n\r\n            const initData = await initResponse.json();\r\n\r\n            if (initResponse.ok) {\r\n              console.log(\"User initialization:\", initData.message);\r\n            } else {\r\n              console.warn(\"Initialization warning:\", initData.message);\r\n            }\r\n          } catch (initError) {\r\n            console.error(\"Failed to initialize user:\", initError);\r\n            // Don't block login if initialization fails\r\n          }\r\n\r\n          router.push(\"/\");\r\n        } else {\r\n          console.warn(\"No session found, redirecting to login\");\r\n          router.push(\"/auth/login\");\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Callback error:\", err);\r\n        router.push(\"/auth/login\");\r\n      }\r\n    };\r\n    getSession();\r\n  }, [router, supabase]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-12 justify-center items-center w-screen h-screen\">\r\n      <Loader />\r\n      <p className=\"text-primary font-bold text-center text-sm\">\r\n        Authenticating...\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa;YACjB,IAAI;gBACF,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EACjB,KAAK,EACN,GAAG,MAAM,wIAAQ,CAAC,IAAI,CAAC,UAAU;gBAElC,IAAI,OAAO;oBACT,QAAQ,KAAK,CAAC,kBAAkB,MAAM,OAAO;oBAC7C,OAAO,IAAI,CAAC;oBACZ;gBACF;gBAEA,IAAI,SAAS;oBACX,QAAQ,GAAG,CAAC,4BAA4B,QAAQ,IAAI,CAAC,KAAK;oBAE1D,2CAA2C;oBAC3C,IAAI;wBACF,MAAM,eAAe,MAAM,MAAM,wBAAwB;4BACvD,QAAQ;wBACV;wBAEA,MAAM,WAAW,MAAM,aAAa,IAAI;wBAExC,IAAI,aAAa,EAAE,EAAE;4BACnB,QAAQ,GAAG,CAAC,wBAAwB,SAAS,OAAO;wBACtD,OAAO;4BACL,QAAQ,IAAI,CAAC,2BAA2B,SAAS,OAAO;wBAC1D;oBACF,EAAE,OAAO,WAAW;wBAClB,QAAQ,KAAK,CAAC,8BAA8B;oBAC5C,4CAA4C;oBAC9C;oBAEA,OAAO,IAAI,CAAC;gBACd,OAAO;oBACL,QAAQ,IAAI,CAAC;oBACb,OAAO,IAAI,CAAC;gBACd;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,mBAAmB;gBACjC,OAAO,IAAI,CAAC;YACd;QACF;QACA;IACF,GAAG;QAAC;QAAQ,wIAAQ;KAAC;IAErB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,4IAAM;;;;;0BACP,8OAAC;gBAAE,WAAU;0BAA6C;;;;;;;;;;;;AAKhE","debugId":null}}]
}